# Backend для аутентификации пользователей

Backend написан на Node.js с использованием фреймворка Express и базы данных MongoDB. Он включает в себя несколько файлов и папок:

- `/config/db.js`: Настройка подключения к базе данных MongoDB.
- `/models/User.js`: Модель пользователя, которая определяет структуру данных пользователя.
- `/routes/auth.js`: Маршруты для обработки запросов на регистрацию и авторизацию.
- `server.js`: Главный файл сервера, который запускает приложение.

## Как работает backend?

### Подключение к базе данных

В файле `db.js` настроено подключение к MongoDB, где мы будем хранить информацию о пользователях. Это необходимо для сохранения данных о зарегистрированных пользователях, таких как email и хешированные пароли.

### Модель пользователя

В файле `User.js` определена модель пользователя с полями для email и пароля. Пароль перед сохранением в базу данных будет хешироваться (шифроваться) с помощью библиотеки bcrypt. Это важно для обеспечения безопасности данных пользователей.

### Маршруты аутентификации

В файле `auth.js` настроены два основных маршрута:
- `POST /api/auth/register`: Регистрация нового пользователя. Сервер получает email и пароль, создает нового пользователя и возвращает JWT токен. JWT (JSON Web Token) используется для того, чтобы аутентифицировать пользователя в дальнейшем без необходимости повторного ввода пароля.
- `POST /api/auth/login`: Авторизация пользователя. Сервер получает email и пароль, проверяет их и, если данные верны, возвращает JWT токен. Этот токен будет использоваться клиентом для доступа к защищённым ресурсам.

### Настройка и запуск сервера

В файле `server.js` настроены основные настройки и запуск сервера. Сервер использует маршруты для аутентификации.

### Использование JWT токенов

#### Регистрация

Когда новый пользователь регистрируется, сервер создает запись в базе данных с его email и хешированным паролем. После этого сервер создает JWT токен, который включает в себя информацию о пользователе (например, его ID). Этот токен возвращается клиенту и может быть использован для аутентификации при последующих запросах.

#### Авторизация

При авторизации пользователь отправляет свой email и пароль. Сервер проверяет, существует ли пользователь с таким email и совпадает ли пароль. Если проверка успешна, сервер создает и возвращает JWT токен. Этот токен будет храниться на клиенте и отправляться с каждым запросом к защищённым ресурсам.

## Как использовать backend?

### Шаг 1: Скачайте проект

Клонируйте репозиторий или скачайте архив с кодом backend'а и разархивируйте его в удобное место.

### Шаг 2: Установите зависимости

Перейдите в папку с проектом и выполните команду `npm install` для установки всех необходимых библиотек.

### Шаг 3: Установите MongoDB

Скачайте и установите MongoDB: [MongoDB Community](https://www.mongodb.com/try/download/community). При установке не снимайте галочку с Install MongoDB Compass.

### Шаг 4: Запустите MongoDB сервер

Откройте MongoDB Compass, создайте новое соединение.

В этом подключении создайте новую базу данных с именем (name) - `authDB` и именем коллекции (collection name) - `auth`.

### Шаг 5: Запустите backend

В папке с проектом выполните команду:

node server.js

Если все настроено правильно, вы увидите сообщение "Server running on port 5000".